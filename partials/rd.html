<div ng-controller="RdCtrl">
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<span class="navbar-brand">Clockdocs</span>
			</div> <!-- /.navbar-header -->
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li><a ng-click="create()"><cw-icon type="plus-sign"></cw-icon> Create</a></li>
					<li><a ng-click="open()"><cw-icon type="open"></cw-icon> Open</a></li>
					<li ng-show="rd"><a ng-click="save()"><cw-icon type="save"></cw-icon> Save</a></li>
					<li ng-show="rd"><a ng-click="print()"><cw-icon type="print"></cw-icon> Print</a></li>
				</ul>
			</div> <!-- /.navbar-collapse -->
			<div class="alert alert-{{alert.type}} alert-dismissable" ng-if="alert.content">
				<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>	
				<strong>{{alert.title}}</strong> {{alert.content}}
			</div>
		</div> <!-- /.container-fluid -->
	</nav>

	<header class="row doc-header header-alt">
		<div aria-hidden="true" class="cw_icon-cw_big logo"></div>
		<h1>Project Requirements Definition <span class="version-num">v.{{version}}</span></h1>
	</header>


	<div class="row doc-container" ng-show="rd">
		<div class="col-md-3 doc-toc">
			<div class="nav-fixed box-emp">
				<h2>Table of Contents</h2>
				<ul class="nav toc sortable" sort-on-update="sortItems(rd.sections, guids)">
					<li ng-repeat="section in rd.sections" data-guid="{{section.guid}}">
						<a class="toc-section" cw-scroller="section.guid"><cw-icon type="move" class="draggable"></cw-icon> {{section.title}}</a>
						<ol class="nav nav-stacked sortable counted" sort-on-update="sortItems(section.features, guids)">
							<li ng-repeat="feature in section.features" ng-include="'partials/toc.html'" data-guid="{{feature.guid}}" ng-init="$label = ($index + 1) + '.'"></li>
						</ol>
					</li>
				</ul>
			</div> <!-- /.fixed-nav -->
		</div> <!-- /.doc-toc -->
		<div class="col-md-8 doc-content">
			<h1 ng-model="rd.title" cw-editable></h1>
			<div class="well slideout animated">
				<a ng-click="insertSection(0)"><cw-icon type="th-large"></cw-icon> New Section</a>
			</div>
			<section ng-repeat="section in rd.sections">
				<div class="dropdown pull-left">
					<a class="btn dropdown-toggle" data-toggle="dropdown"><cw-icon type="chevron-right"></cw-icon></a>
					<ul class="dropdown-menu">
						<li><a ng-click="insertFeature(section.features)"><cw-icon type="plus"></cw-icon> New Feature</a></li>
						<li class="divider"></li>
						<li ng-repeat="ft in flagTypes"><a ng-click="insertFlag(section.flags, ft.type)"><cw-icon type="flag"></cw-icon> New {{ft.name}}</a></li>
						<li class="divider"></li>
						<li><a ng-click="insertSection($index + 1)"><cw-icon type="th-large"></cw-icon> New Section</a></li>
						<li class="divider"></li>
						<li modal modal-click="deleteSection($index)" modal-title="Delete '{{section.title}}'?" modal-body="Are you sure you want to delete '{{section.title}}'?"><cw-icon type="trash"></cw-icon> Delete Section</li>
					</ul>
				</div>
				<div class="section-title" cw-editable id="{{section.guid}}" ng-model="section.title"></div>
				<div class="section-content" text-angular ng-model="section.content"></div>
				<div class="flags" ng-include="'partials/flags.html'" ng-init="flags = section.flags" />
				<div class="features counted">
					<div class="row feature level_0" ng-repeat="feature in section.features" ng-include="'partials/feature.html'" ng-init="$level = 0"></div>
				</div>
				<hr />
			</section>
		</div> <!-- /.doc-content -->
		<div class="col-md-1 doc-gutter"></div>
	</div>
</div>
